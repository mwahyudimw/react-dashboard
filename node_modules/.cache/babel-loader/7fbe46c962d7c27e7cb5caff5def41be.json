{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/Item.js\";\nimport React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { red } from \"@material-ui/core/colors\";\nimport { apiDashManage } from \"../../../api/api\";\nimport { ArticleContext } from \"../../../context/articleContext\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Container from \"@material-ui/core/Container\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport Button from \"@material-ui/core/Button\";\nimport Swal from \"sweetalert2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport Edit from \"./Edit\";\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 10\n    }\n  }));\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\"\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\"\n  },\n  avatar: {\n    backgroundColor: red[500]\n  },\n  col: {\n    [theme.breakpoints.down(\"sm\")]: {\n      maxWidth: \"100%\",\n      flexBasis: \"100%\"\n    }\n  },\n  imgResponsive: {\n    width: 450,\n    height: 200,\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\"\n    }\n  },\n  cardLayout: {\n    height: \"auto\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: \"auto\",\n      overflow: \"hidden\"\n    }\n  }\n}));\nexport default function Item() {\n  const classes = useStyles();\n  const [article, setArticle] = React.useContext(ArticleContext);\n  const [loading, setLoading] = React.useState(false);\n  const [state, setState] = React.useState({\n    loadArticle: true,\n    title: \"\",\n    severity: \"\",\n    open: false,\n    vertical: \"top\",\n    horizontal: \"right\"\n  });\n  const [open, setOpen] = React.useState(false);\n  const data = localStorage.getItem(\"data\");\n  const parse = JSON.parse(data);\n  const user = {\n    name: parse.username,\n    avatar: `http://dashmanage.herokuapp.com/${parse.picture}`\n  };\n\n  const fetchArticle = async () => {\n    const response = await axios({\n      method: \"get\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    });\n    const responseJson = await response;\n\n    if (responseJson.error) {\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Your article empty , please make first article !\",\n        severity: \"info\"\n      }));\n    } else {\n      setState(state => ({ ...state,\n        open: false,\n        loadArticle: false\n      }));\n      setArticle(responseJson.data.articles);\n    }\n  };\n\n  useEffect(() => {\n    fetchArticle();\n  }, []);\n\n  const deleteArticle = id => {\n    setLoading(true);\n    axios.delete(`${apiDashManage}article/${id}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    }).then(() => {\n      setLoading(false);\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Article has been deleted !\",\n        severity: \"success\"\n      }));\n    }).catch(() => {\n      setLoading(false);\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Check your connection !\",\n        severity: \"error\"\n      }));\n    });\n  };\n\n  const {\n    title,\n    severity,\n    horizontal,\n    vertical,\n    loadArticle\n  } = state;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical,\n      horizontal\n    },\n    open: state.open,\n    autoHideDuration: 6000,\n    onClose: () => setState(state => ({ ...state,\n      open: false\n    })),\n    key: vertical + horizontal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: () => setState(state => ({ ...state,\n      open: false\n    })),\n    severity: severity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 11\n    }\n  }, title)), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, loadArticle ? \"loading..\" : article.map(tile => {\n    return /*#__PURE__*/React.createElement(Grid, {\n      className: classes.col,\n      item: true,\n      xs: 6,\n      sm: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      key: tile._id,\n      className: classes.cardLayout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      avatar: /*#__PURE__*/React.createElement(Avatar, {\n        \"aria-label\": \"recipe\",\n        src: user.avatar,\n        className: classes.avatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 27\n        }\n      }),\n      action: /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"settings\",\n        onClick: () => setOpen(true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(CreateIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 29\n        }\n      })),\n      title: `${tile.title}`,\n      subheader: moment(tile.createdAt).format(\"LLL\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(CardMedia, {\n      className: classes.media,\n      image: `http://dashmanage.herokuapp.com/${tile.thumbnail.imageUrl}`,\n      title: tile.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      dangerouslySetInnerHTML: {\n        __html: `${tile.description}`\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(CardActions, {\n      disableSpacing: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"outlined\",\n      color: \"secondary\",\n      disabled: loading,\n      onClick: () => deleteArticle(tile._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 25\n      }\n    }, loading ? \"Loading ...\" : \"DELETE\"))));\n  })), /*#__PURE__*/React.createElement(Edit, {\n    open: open,\n    handleClose: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/Item.js"],"names":["React","useEffect","makeStyles","red","apiDashManage","ArticleContext","Snackbar","MuiAlert","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","Typography","Grid","IconButton","Container","CreateIcon","Button","Swal","axios","moment","Edit","Alert","props","useStyles","theme","root","flexGrow","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","col","breakpoints","down","maxWidth","flexBasis","imgResponsive","width","cardLayout","overflow","Item","classes","article","setArticle","useContext","loading","setLoading","useState","state","setState","loadArticle","title","severity","open","vertical","horizontal","setOpen","data","localStorage","getItem","parse","JSON","user","name","username","picture","fetchArticle","response","method","url","headers","Authorization","responseJson","error","articles","deleteArticle","id","delete","then","catch","map","tile","_id","createdAt","format","thumbnail","imageUrl","__html","description"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { red } from \"@material-ui/core/colors\";\nimport { apiDashManage } from \"../../../api/api\";\nimport { ArticleContext } from \"../../../context/articleContext\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Grid from \"@material-ui/core/Grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Container from \"@material-ui/core/Container\";\nimport CreateIcon from \"@material-ui/icons/Create\";\nimport Button from \"@material-ui/core/Button\";\nimport Swal from \"sweetalert2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport Edit from \"./Edit\";\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  media: {\n    height: 0,\n    paddingTop: \"56.25%\",\n  },\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\",\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n  col: {\n    [theme.breakpoints.down(\"sm\")]: {\n      maxWidth: \"100%\",\n      flexBasis: \"100%\",\n    },\n  },\n  imgResponsive: {\n    width: 450,\n    height: 200,\n    [theme.breakpoints.down(\"sm\")]: {\n      width: \"100%\",\n    },\n  },\n  cardLayout: {\n    height: \"auto\",\n    [theme.breakpoints.down(\"sm\")]: {\n      height: \"auto\",\n      overflow: \"hidden\",\n    },\n  },\n}));\n\nexport default function Item() {\n  const classes = useStyles();\n  const [article, setArticle] = React.useContext(ArticleContext);\n  const [loading, setLoading] = React.useState(false);\n  const [state, setState] = React.useState({\n    loadArticle: true,\n    title: \"\",\n    severity: \"\",\n    open: false,\n    vertical: \"top\",\n    horizontal: \"right\",\n  });\n  const [open, setOpen] = React.useState(false);\n  const data = localStorage.getItem(\"data\");\n  const parse = JSON.parse(data);\n\n  const user = {\n    name: parse.username,\n    avatar: `http://dashmanage.herokuapp.com/${parse.picture}`,\n  };\n\n  const fetchArticle = async () => {\n    const response = await axios({\n      method: \"get\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    });\n    const responseJson = await response;\n    if (responseJson.error) {\n      setState((state) => ({\n        ...state,\n        open: true,\n        title: \"Your article empty , please make first article !\",\n        severity: \"info\",\n      }));\n    } else {\n      setState((state) => ({\n        ...state,\n        open: false,\n        loadArticle: false,\n      }));\n      setArticle(responseJson.data.articles);\n    }\n  };\n\n  useEffect(() => {\n    fetchArticle();\n  }, []);\n\n  const deleteArticle = (id) => {\n    setLoading(true);\n    axios\n      .delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then(() => {\n        setLoading(false);\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Article has been deleted !\",\n          severity: \"success\",\n        }));\n      })\n      .catch(() => {\n        setLoading(false);\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Check your connection !\",\n          severity: \"error\",\n        }));\n      });\n  };\n\n  const { title, severity, horizontal, vertical, loadArticle } = state;\n\n  return (\n    <div className={classes.root}>\n      <Container>\n        <Snackbar\n          anchorOrigin={{ vertical, horizontal }}\n          open={state.open}\n          autoHideDuration={6000}\n          onClose={() =>\n            setState((state) => ({\n              ...state,\n              open: false,\n            }))\n          }\n          key={vertical + horizontal}\n        >\n          <Alert\n            onClose={() =>\n              setState((state) => ({\n                ...state,\n                open: false,\n              }))\n            }\n            severity={severity}\n          >\n            {title}\n          </Alert>\n        </Snackbar>\n\n        <Grid container spacing={3}>\n          {loadArticle\n            ? \"loading..\"\n            : article.map((tile) => {\n                return (\n                  <Grid className={classes.col} item xs={6} sm={3}>\n                    <Card key={tile._id} className={classes.cardLayout}>\n                      <CardHeader\n                        avatar={\n                          <Avatar\n                            aria-label=\"recipe\"\n                            src={user.avatar}\n                            className={classes.avatar}\n                          />\n                        }\n                        action={\n                          <IconButton\n                            aria-label=\"settings\"\n                            onClick={() => setOpen(true)}\n                          >\n                            <CreateIcon />\n                          </IconButton>\n                        }\n                        title={`${tile.title}`}\n                        subheader={moment(tile.createdAt).format(\"LLL\")}\n                      />\n                      <CardMedia\n                        className={classes.media}\n                        image={`http://dashmanage.herokuapp.com/${tile.thumbnail.imageUrl}`}\n                        title={tile.title}\n                      />\n\n                      <CardContent>\n                        <Typography\n                          variant=\"body2\"\n                          color=\"textSecondary\"\n                          component=\"p\"\n                          dangerouslySetInnerHTML={{\n                            __html: `${tile.description}`,\n                          }}\n                        />\n                      </CardContent>\n                      <CardActions disableSpacing>\n                        <Button\n                          variant=\"outlined\"\n                          color=\"secondary\"\n                          disabled={loading}\n                          onClick={() => deleteArticle(tile._id)}\n                        >\n                          {loading ? \"Loading ...\" : \"DELETE\"}\n                        </Button>\n                      </CardActions>\n                    </Card>\n                  </Grid>\n                );\n              })}\n        </Grid>\n\n        <Edit open={open} handleClose={() => setOpen(false)} />\n      </Container>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}