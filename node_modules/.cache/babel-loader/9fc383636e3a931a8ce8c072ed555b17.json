{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js\";\nimport React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\nlet ContextType;\nconst {\n  Provider,\n  Consumer\n} = ContextType = React.createContext();\n\nclass ArticleProvider extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: [],\n      snackbar: {\n        loadArticle: true,\n        open: false,\n        title: \"\",\n        severity: \"\",\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      loading: false,\n      values: {\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\"\n      },\n      loadArticle: {\n        uploadThumbnail: false,\n        editThumbnail: false,\n        articleAdd: false,\n        articleEdit: false\n      }\n    };\n\n    this.getArticle = async () => {\n      const response = await axios({\n        method: \"get\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const responseJson = await response;\n\n      if (responseJson.data.articles.length < 0) {\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Your article empty, please make first article !\",\n            severity: \"info\"\n          }\n        }));\n      } else {\n        this.setState(prevState => ({\n          article: responseJson.data.articles,\n          snackbar: { ...prevState.snackbar,\n            open: false,\n            loadArticle: false\n          }\n        }));\n      }\n    };\n\n    this.onClose = () => {\n      this.setState(prevState => ({\n        snackbar: { ...prevState.snackbar,\n          open: false\n        }\n      }));\n    };\n\n    this.handleChange = e => {\n      e.persist();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: e.target.value\n        }\n      }));\n    };\n\n    this.handleTags = newValue => {\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          tags: newValue\n        }\n      }));\n    };\n\n    this.handleEditor = (event, editor) => {\n      const data = editor.getData();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          description: data\n        }\n      }));\n    };\n\n    this.onImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      let file = e.target.files[0];\n\n      reader.onloadend = () => {\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            image: file,\n            picture: reader.result,\n            figurethumbnails: file.name\n          }\n        }));\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.addImage = () => {\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          uploadThumbnail: true\n        }\n      }));\n      const formdata = new FormData();\n      formdata.append(\"image\", this.state.values.image);\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}image`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: formdata\n      }).then(res => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            imgrequest: res.data.thumbnail\n          }\n        }));\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n\n    this.addArticle = e => {\n      e.preventDefault();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          imgrequest: null,\n          picture: \"https://placehold.it/500x600\",\n          figurethumbnails: \"\"\n        }\n      }));\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          articleAdd: true\n        }\n      }));\n      const dataArticle = {\n        title: this.state.values.title,\n        tags: this.state.values.tags,\n        thumbnail: this.state.values.imgrequest,\n        description: this.state.values.description\n      };\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: dataArticle\n      }).then(res => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\"\n          }\n        }));\n        this.getArticle();\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n      });\n    };\n\n    this.editArticle = id => {\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          imgrequest: null,\n          picture: \"https://placehold.it/500x600\",\n          figurethumbnails: \"\"\n        }\n      }));\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          articleEdit: true,\n          editThumbnail: true\n        }\n      }));\n      const dataArticle = {\n        id: id,\n        title: this.state.values.title,\n        tags: this.state.values.tags,\n        thumbnail: this.state.values.imgrequest,\n        description: this.state.values.description\n      };\n      axios({\n        method: \"put\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: dataArticle\n      }).then(() => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been edited !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\"\n          }\n        }));\n        this.getArticle();\n      }).catch(() => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n      });\n    };\n\n    this.deleteArticle = id => {\n      this.setState({\n        loading: true\n      });\n      axios.delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      }).then(() => {\n        this.setState({\n          loading: true\n        });\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\"\n          }\n        }));\n        this.getArticle();\n      }).catch(() => {\n        this.setState({\n          loading: true\n        });\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n    const {\n      state\n    } = this;\n    return /*#__PURE__*/React.createElement(Provider, {\n      value: { ...state,\n        onClose: this.onClose,\n        deleteArticle: this.deleteArticle,\n        handleChange: this.handleChange,\n        handleTags: this.handleTags,\n        onImageChange: this.onImageChange,\n        addImage: this.addImage,\n        handleEditor: this.handleEditor,\n        addArticle: this.addArticle,\n        editArticle: this.editArticle\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 7\n      }\n    }, children);\n  }\n\n}\n\nexport { Provider, Consumer, ContextType, ArticleProvider };","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js"],"names":["React","apiDashManage","axios","ContextType","Provider","Consumer","createContext","ArticleProvider","Component","state","article","snackbar","loadArticle","open","title","severity","vertical","horizontal","loading","values","tags","description","image","imgrequest","picture","figurethumbnails","uploadThumbnail","editThumbnail","articleAdd","articleEdit","getArticle","response","method","url","headers","Authorization","localStorage","getItem","responseJson","data","articles","length","setState","prevState","onClose","handleChange","e","persist","target","value","handleTags","newValue","handleEditor","event","editor","getData","onImageChange","preventDefault","reader","FileReader","file","files","onloadend","result","name","readAsDataURL","addImage","formdata","FormData","append","then","res","thumbnail","catch","err","addArticle","dataArticle","editArticle","id","deleteArticle","delete","componentDidMount","render","children","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\n\nlet ContextType;\nconst { Provider, Consumer } = (ContextType = React.createContext());\n\nclass ArticleProvider extends React.Component {\n  state = {\n    article: [],\n    snackbar: {\n      loadArticle: true,\n      open: false,\n      title: \"\",\n      severity: \"\",\n      vertical: \"top\",\n      horizontal: \"right\",\n    },\n    loading: false,\n    values: {\n      title: \"\",\n      tags: [],\n      description: \"\",\n      image: null,\n      imgrequest: null,\n      picture: \"https://placehold.it/500x600\",\n      figurethumbnails: \"\",\n    },\n    loadArticle: {\n      uploadThumbnail: false,\n      editThumbnail: false,\n      articleAdd: false,\n      articleEdit: false,\n    },\n  };\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  getArticle = async () => {\n    const response = await axios({\n      method: \"get\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    });\n    const responseJson = await response;\n    if (responseJson.data.articles.length < 0) {\n      this.setState((prevState) => ({\n        snackbar: {\n          ...prevState.snackbar,\n          open: true,\n          title: \"Your article empty, please make first article !\",\n          severity: \"info\",\n        },\n      }));\n    } else {\n      this.setState((prevState) => ({\n        article: responseJson.data.articles,\n        snackbar: {\n          ...prevState.snackbar,\n          open: false,\n          loadArticle: false,\n        },\n      }));\n    }\n  };\n\n  onClose = () => {\n    this.setState((prevState) => ({\n      snackbar: {\n        ...prevState.snackbar,\n        open: false,\n      },\n    }));\n  };\n\n  /* \n    Add Article\n  */\n\n  handleChange = (e) => {\n    e.persist();\n\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: e.target.value,\n      },\n    }));\n  };\n\n  handleTags = (newValue) => {\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        tags: newValue,\n      },\n    }));\n  };\n\n  handleEditor = (event, editor) => {\n    const data = editor.getData();\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        description: data,\n      },\n    }));\n  };\n\n  onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState((prevState) => ({\n        values: {\n          ...prevState.values,\n          image: file,\n          picture: reader.result,\n          figurethumbnails: file.name,\n        },\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  addImage = () => {\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        uploadThumbnail: true,\n      },\n    }));\n\n    const formdata = new FormData();\n    formdata.append(\"image\", this.state.values.image);\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}image`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            imgrequest: res.data.thumbnail,\n          },\n        }));\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  addArticle = (e) => {\n    e.preventDefault();\n\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\",\n      },\n    }));\n\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        articleAdd: true,\n      },\n    }));\n\n    const dataArticle = {\n      title: this.state.values.title,\n      tags: this.state.values.tags,\n      thumbnail: this.state.values.imgrequest,\n      description: this.state.values.description,\n    };\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then((res) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\",\n          },\n        }));\n        this.getArticle();\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n      });\n  };\n\n  /* \n    Edit article\n  */\n\n  editArticle = (id) => {\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\",\n      },\n    }));\n\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        articleEdit: true,\n        editThumbnail: true,\n      },\n    }));\n\n    const dataArticle = {\n      id: id,\n      title: this.state.values.title,\n      tags: this.state.values.tags,\n      thumbnail: this.state.values.imgrequest,\n      description: this.state.values.description,\n    };\n\n    axios({\n      method: \"put\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then(() => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been edited !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\",\n          },\n        }));\n        this.getArticle();\n      })\n      .catch(() => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n      });\n  };\n\n  /* \n    Delete article\n  */\n\n  deleteArticle = (id) => {\n    this.setState({\n      loading: true,\n    });\n    axios\n      .delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then(() => {\n        this.setState({\n          loading: true,\n        });\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\",\n          },\n        }));\n\n        this.getArticle();\n      })\n      .catch(() => {\n        this.setState({\n          loading: true,\n        });\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { state } = this;\n    return (\n      <Provider\n        value={{\n          ...state,\n          onClose: this.onClose,\n          deleteArticle: this.deleteArticle,\n          handleChange: this.handleChange,\n          handleTags: this.handleTags,\n          onImageChange: this.onImageChange,\n          addImage: this.addImage,\n          handleEditor: this.handleEditor,\n          addArticle: this.addArticle,\n          editArticle: this.editArticle,\n        }}\n      >\n        {children}\n      </Provider>\n    );\n  }\n}\n\nexport { Provider, Consumer, ContextType, ArticleProvider };\n"]},"metadata":{},"sourceType":"module"}