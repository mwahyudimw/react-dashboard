{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js\";\nimport React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\nlet ContextType;\nconst {\n  Provider,\n  Consumer\n} = ContextType = React.createContext();\n\nclass ArticleProvider extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: [],\n      snackbar: {\n        loadArticle: true,\n        open: false,\n        title: \"\",\n        severity: \"\",\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      loading: false,\n      values: {\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\"\n      },\n      loadArticle: {\n        uploadThumbnail: false,\n        editThumbnail: false,\n        articleAdd: false,\n        articleEdit: false\n      }\n    };\n\n    this.getArticle = async () => {\n      const response = await axios({\n        method: \"get\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const responseJson = await response;\n      console.log(responseJson.data.articles.length);\n\n      if (responseJson.data.articles.length <= 0) {\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Your article empty, please make first article !\",\n            severity: \"info\",\n            loadArticle: false\n          }\n        }));\n      } else {\n        this.setState(prevState => ({\n          article: responseJson.data.articles,\n          snackbar: { ...prevState.snackbar,\n            open: false,\n            loadArticle: false\n          }\n        }));\n      }\n    };\n\n    this.onClose = () => {\n      this.setState(prevState => ({\n        snackbar: { ...prevState.snackbar,\n          open: false\n        }\n      }));\n    };\n\n    this.handleChange = e => {\n      e.persist();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: e.target.value\n        }\n      }));\n    };\n\n    this.handleTags = newValue => {\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          tags: newValue\n        }\n      }));\n    };\n\n    this.handleEditor = (event, editor) => {\n      const data = editor.getData();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          description: data\n        }\n      }));\n    };\n\n    this.onImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      let file = e.target.files[0];\n\n      reader.onloadend = () => {\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            image: file,\n            picture: reader.result,\n            figurethumbnails: file.name\n          }\n        }));\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.addImage = () => {\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          uploadThumbnail: true\n        }\n      }));\n      const formdata = new FormData();\n      formdata.append(\"image\", this.state.values.image);\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}image`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: formdata\n      }).then(res => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            imgrequest: res.data.thumbnail\n          }\n        }));\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n\n    this.addArticle = e => {\n      e.preventDefault();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          imgrequest: null,\n          picture: \"https://placehold.it/500x600\",\n          figurethumbnails: \"\"\n        }\n      }));\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          articleAdd: true\n        }\n      }));\n      const dataArticle = {\n        title: this.state.values.title,\n        tags: this.state.values.tags,\n        thumbnail: this.state.values.imgrequest,\n        description: this.state.values.description\n      };\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: dataArticle\n      }).then(() => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\"\n          }\n        }));\n        this.getArticle();\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n      });\n    };\n\n    this.editArticle = id => {\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          imgrequest: null,\n          picture: \"https://placehold.it/500x600\",\n          figurethumbnails: \"\"\n        }\n      }));\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          articleEdit: true,\n          editThumbnail: true\n        }\n      }));\n      const dataArticle = {\n        id: id,\n        title: this.state.values.title,\n        tags: this.state.values.tags,\n        thumbnail: this.state.values.imgrequest,\n        description: this.state.values.description\n      };\n      axios({\n        method: \"put\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: dataArticle\n      }).then(() => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been edited !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\"\n          }\n        }));\n        this.getArticle();\n      }).catch(() => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n      });\n    };\n\n    this.deleteArticle = id => {\n      this.setState({\n        loading: true\n      });\n      axios.delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      }).then(() => {\n        this.setState(prevState => ({\n          loading: false,\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\"\n          }\n        }));\n        this.getArticle();\n      }).catch(() => {\n        this.setState(prevState => ({\n          loading: false,\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n    const {\n      state,\n      onClose,\n      deleteArticle,\n      handleChange,\n      handleTags,\n      onImageChange,\n      addImage,\n      handleEditor,\n      addArticle,\n      editArticle\n    } = this;\n    return /*#__PURE__*/React.createElement(Provider, {\n      value: { ...state,\n        onClose: onClose,\n        deleteArticle: deleteArticle,\n        handleChange: handleChange,\n        handleTags: handleTags,\n        onImageChange: onImageChange,\n        addImage: addImage,\n        handleEditor: handleEditor,\n        addArticle: addArticle,\n        editArticle: editArticle\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 7\n      }\n    }, children);\n  }\n\n}\n\nexport { Provider, Consumer, ArticleProvider };","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js"],"names":["React","apiDashManage","axios","ContextType","Provider","Consumer","createContext","ArticleProvider","Component","state","article","snackbar","loadArticle","open","title","severity","vertical","horizontal","loading","values","tags","description","image","imgrequest","picture","figurethumbnails","uploadThumbnail","editThumbnail","articleAdd","articleEdit","getArticle","response","method","url","headers","Authorization","localStorage","getItem","responseJson","console","log","data","articles","length","setState","prevState","onClose","handleChange","e","persist","target","value","handleTags","newValue","handleEditor","event","editor","getData","onImageChange","preventDefault","reader","FileReader","file","files","onloadend","result","name","readAsDataURL","addImage","formdata","FormData","append","then","res","thumbnail","catch","err","addArticle","dataArticle","editArticle","id","deleteArticle","delete","componentDidMount","render","children","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\n\nlet ContextType;\nconst { Provider, Consumer } = (ContextType = React.createContext());\n\nclass ArticleProvider extends React.Component {\n  state = {\n    article: [],\n    snackbar: {\n      loadArticle: true,\n      open: false,\n      title: \"\",\n      severity: \"\",\n      vertical: \"top\",\n      horizontal: \"right\",\n    },\n    loading: false,\n    values: {\n      title: \"\",\n      tags: [],\n      description: \"\",\n      image: null,\n      imgrequest: null,\n      picture: \"https://placehold.it/500x600\",\n      figurethumbnails: \"\",\n    },\n    loadArticle: {\n      uploadThumbnail: false,\n      editThumbnail: false,\n      articleAdd: false,\n      articleEdit: false,\n    },\n  };\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  getArticle = async () => {\n    const response = await axios({\n      method: \"get\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    });\n    const responseJson = await response;\n    console.log(responseJson.data.articles.length);\n    if (responseJson.data.articles.length <= 0) {\n      this.setState((prevState) => ({\n        snackbar: {\n          ...prevState.snackbar,\n          open: true,\n          title: \"Your article empty, please make first article !\",\n          severity: \"info\",\n          loadArticle: false,\n        },\n      }));\n    } else {\n      this.setState((prevState) => ({\n        article: responseJson.data.articles,\n        snackbar: {\n          ...prevState.snackbar,\n          open: false,\n          loadArticle: false,\n        },\n      }));\n    }\n  };\n\n  onClose = () => {\n    this.setState((prevState) => ({\n      snackbar: {\n        ...prevState.snackbar,\n        open: false,\n      },\n    }));\n  };\n\n  /* \n    Add Article\n  */\n\n  handleChange = (e) => {\n    e.persist();\n\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: e.target.value,\n      },\n    }));\n  };\n\n  handleTags = (newValue) => {\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        tags: newValue,\n      },\n    }));\n  };\n\n  handleEditor = (event, editor) => {\n    const data = editor.getData();\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        description: data,\n      },\n    }));\n  };\n\n  onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState((prevState) => ({\n        values: {\n          ...prevState.values,\n          image: file,\n          picture: reader.result,\n          figurethumbnails: file.name,\n        },\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  addImage = () => {\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        uploadThumbnail: true,\n      },\n    }));\n\n    const formdata = new FormData();\n    formdata.append(\"image\", this.state.values.image);\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}image`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            imgrequest: res.data.thumbnail,\n          },\n        }));\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  addArticle = (e) => {\n    e.preventDefault();\n\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\",\n      },\n    }));\n\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        articleAdd: true,\n      },\n    }));\n\n    const dataArticle = {\n      title: this.state.values.title,\n      tags: this.state.values.tags,\n      thumbnail: this.state.values.imgrequest,\n      description: this.state.values.description,\n    };\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then(() => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\",\n          },\n        }));\n        this.getArticle();\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n      });\n  };\n\n  /* \n    Edit article\n  */\n\n  editArticle = (id) => {\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\",\n      },\n    }));\n\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        articleEdit: true,\n        editThumbnail: true,\n      },\n    }));\n\n    const dataArticle = {\n      id: id,\n      title: this.state.values.title,\n      tags: this.state.values.tags,\n      thumbnail: this.state.values.imgrequest,\n      description: this.state.values.description,\n    };\n\n    axios({\n      method: \"put\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then(() => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been edited !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: null,\n            imgrequest: null,\n            picture: \"https://placehold.it/500x600\",\n            figurethumbnails: \"\",\n          },\n        }));\n        this.getArticle();\n      })\n      .catch(() => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleEdit: false,\n            editThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n      });\n  };\n\n  /* \n    Delete article\n  */\n\n  deleteArticle = (id) => {\n    this.setState({\n      loading: true,\n    });\n    axios\n      .delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then(() => {\n        this.setState((prevState) => ({\n          loading: false,\n\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\",\n          },\n        }));\n\n        this.getArticle();\n      })\n      .catch(() => {\n        this.setState((prevState) => ({\n          loading: false,\n\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  render() {\n    const { children } = this.props;\n    const {\n      state,\n      onClose,\n      deleteArticle,\n      handleChange,\n      handleTags,\n      onImageChange,\n      addImage,\n      handleEditor,\n      addArticle,\n      editArticle,\n    } = this;\n    return (\n      <Provider\n        value={{\n          ...state,\n          onClose: onClose,\n          deleteArticle: deleteArticle,\n          handleChange: handleChange,\n          handleTags: handleTags,\n          onImageChange: onImageChange,\n          addImage: addImage,\n          handleEditor: handleEditor,\n          addArticle: addArticle,\n          editArticle: editArticle,\n        }}\n      >\n        {children}\n      </Provider>\n    );\n  }\n}\n\nexport { Provider, Consumer, ArticleProvider };\n"]},"metadata":{},"sourceType":"module"}