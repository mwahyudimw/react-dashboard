{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/views/Account/components/AccountDetails/AccountDetails.js\";\nimport React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Card, CardHeader, CardContent, CardActions, Divider, Grid, Button, TextField } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../../../api/api\";\nimport Swal from \"sweetalert2\";\nconst useStyles = makeStyles(() => ({\n  root: {}\n}));\n\nconst AccountDetails = props => {\n  const {\n    className,\n    ...rest\n  } = props;\n  const classes = useStyles();\n  const [dataUser, setDataUser] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [values, setValues] = useState({\n    username: \"\",\n    email: \"\"\n  });\n\n  const handleChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  useEffect(() => {\n    handleGetDataUser();\n    const user = JSON.parse(localStorage.getItem(\"data\"));\n    setValues(values => ({ ...values,\n      username: user.username,\n      email: user.email\n    }));\n    setDataUser(JSON.parse(localStorage.getItem(\"data\")));\n  }, []); // useEffect(() => {\n  //   console.log(\"dataUsersssssss\", dataUser);\n  // }, [dataUser]);\n\n  const handleGetDataUser = () => {\n    axios({\n      method: \"get\",\n      url: `${apiDashManage + \"users\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    });\n  };\n\n  const handleUpdateUser = () => {\n    setLoading(true);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"update/user\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      },\n      data: values\n    }).then(res => {\n      localStorage.setItem(\"data\", JSON.stringify(res.data.user));\n      setLoading(false);\n      Swal.fire(\"Good job!\", \"Update success\", \"success\");\n    }).catch(err => {\n      setLoading(false);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Check your connections\",\n        text: \"\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Card, Object.assign({}, rest, {\n    className: clsx(classes.root, className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    autoComplete: \"off\",\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    subheader: \"The information can be edited\",\n    title: \"Profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"username\",\n    margin: \"dense\",\n    name: \"username\",\n    onChange: handleChange,\n    required: true,\n    value: values.username,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    md: 6,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Email Address\",\n    margin: \"dense\",\n    name: \"email\",\n    onChange: handleChange,\n    required: true,\n    value: values.email,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleUpdateUser,\n    color: \"primary\",\n    variant: \"contained\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, loading ? \"loading...\" : \"Save details\"))));\n};\n\nAccountDetails.propTypes = {\n  className: PropTypes.string\n};\nexport default AccountDetails;","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/views/Account/components/AccountDetails/AccountDetails.js"],"names":["React","useState","useEffect","clsx","PropTypes","makeStyles","Card","CardHeader","CardContent","CardActions","Divider","Grid","Button","TextField","axios","apiDashManage","Swal","useStyles","root","AccountDetails","props","className","rest","classes","dataUser","setDataUser","loading","setLoading","values","setValues","username","email","handleChange","event","target","name","value","handleGetDataUser","user","JSON","parse","localStorage","getItem","method","url","headers","Authorization","handleUpdateUser","data","then","res","setItem","stringify","fire","catch","err","icon","title","text","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport clsx from \"clsx\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Divider,\n  Grid,\n  Button,\n  TextField,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../../../api/api\";\nimport Swal from \"sweetalert2\";\n\nconst useStyles = makeStyles(() => ({\n  root: {},\n}));\n\nconst AccountDetails = (props) => {\n  const { className, ...rest } = props;\n  const classes = useStyles();\n  const [dataUser, setDataUser] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [values, setValues] = useState({\n    username: \"\",\n    email: \"\",\n  });\n\n  const handleChange = (event) => {\n    setValues({\n      ...values,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  useEffect(() => {\n    handleGetDataUser();\n    const user = JSON.parse(localStorage.getItem(\"data\"));\n    setValues((values) => ({\n      ...values,\n      username: user.username,\n      email: user.email,\n    }));\n    setDataUser(JSON.parse(localStorage.getItem(\"data\")));\n  }, []);\n\n  // useEffect(() => {\n  //   console.log(\"dataUsersssssss\", dataUser);\n  // }, [dataUser]);\n\n  const handleGetDataUser = () => {\n    axios({\n      method: \"get\",\n      url: `${apiDashManage + \"users\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    });\n  };\n\n  const handleUpdateUser = () => {\n    setLoading(true);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"update/user\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n      data: values,\n    })\n      .then((res) => {\n        localStorage.setItem(\"data\", JSON.stringify(res.data.user));\n        setLoading(false);\n        Swal.fire(\"Good job!\", \"Update success\", \"success\");\n      })\n      .catch((err) => {\n        setLoading(false);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Check your connections\",\n          text: \"\",\n        });\n      });\n  };\n\n  return (\n    <Card {...rest} className={clsx(classes.root, className)}>\n      <form autoComplete=\"off\" noValidate>\n        <CardHeader subheader=\"The information can be edited\" title=\"Profile\" />\n        <Divider />\n        <CardContent>\n          <Grid container spacing={3}>\n            <Grid item md={6} xs={12}>\n              <TextField\n                fullWidth\n                label=\"username\"\n                margin=\"dense\"\n                name=\"username\"\n                onChange={handleChange}\n                required\n                value={values.username}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item md={6} xs={12}>\n              <TextField\n                fullWidth\n                label=\"Email Address\"\n                margin=\"dense\"\n                name=\"email\"\n                onChange={handleChange}\n                required\n                value={values.email}\n                variant=\"outlined\"\n              />\n            </Grid>\n          </Grid>\n        </CardContent>\n        <Divider />\n        <CardActions>\n          <Button\n            onClick={handleUpdateUser}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            {loading ? \"loading...\" : \"Save details\"}\n          </Button>\n        </CardActions>\n      </form>\n    </Card>\n  );\n};\n\nAccountDetails.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default AccountDetails;\n"]},"metadata":{},"sourceType":"module"}