{"ast":null,"code":"import _objectSpread from \"/home/dimas/git/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/dimas/git/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dimas/git/react-dashboard/src/views/SignIn/SignIn.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport validate from \"validate.js\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Grid, Button, IconButton, TextField, Link, Typography } from \"@material-ui/core\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../api/api\";\nconst schema = {\n  email: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    email: true,\n    length: {\n      maximum: 64\n    }\n  },\n  password: {\n    presence: {\n      allowEmpty: false,\n      message: \"is required\"\n    },\n    length: {\n      maximum: 128\n    }\n  }\n};\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: \"100%\"\n  },\n  grid: {\n    height: \"100%\"\n  },\n  quoteContainer: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\"\n    }\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundImage: \"url(/images/auth.jpg)\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\"\n  },\n  quoteInner: {\n    textAlign: \"center\",\n    flexBasis: \"600px\"\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white\n  },\n  bio: {\n    color: theme.palette.white\n  },\n  contentContainer: {},\n  content: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\"\n  },\n  contentHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4)\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    [theme.breakpoints.down(\"md\")]: {\n      justifyContent: \"center\"\n    }\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2)\n    }\n  },\n  title: {\n    marginTop: theme.spacing(3)\n  },\n  socialButtons: {\n    marginTop: theme.spacing(3)\n  },\n  socialIcon: {\n    marginRight: theme.spacing(1)\n  },\n  sugestion: {\n    marginTop: theme.spacing(2)\n  },\n  textField: {\n    marginTop: theme.spacing(2)\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nconst SignIn = props => {\n  const history = props.history;\n  const classes = useStyles();\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n  const _useState3 = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {}\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        formState = _useState4[0],\n        setFormState = _useState4[1];\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n    setFormState(formState => _objectSpread({}, formState, {\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]);\n\n  const handleBack = () => {\n    history.goBack();\n  };\n\n  const handleChange = event => {\n    event.persist();\n    setFormState(formState => _objectSpread({}, formState, {\n      values: _objectSpread({}, formState.values, {\n        [event.target.name]: event.target.type === \"checkbox\" ? event.target.checked : event.target.value\n      }),\n      touched: _objectSpread({}, formState.touched, {\n        [event.target.name]: true\n      })\n    }));\n  };\n\n  const handleSignIn = event => {\n    event.preventDefault();\n    setLoading(true);\n    const dataUsers = {\n      password: formState.values.password,\n      email: formState.values.email\n    };\n    axios.post(\"\".concat(apiDashManage + \"sign-in\"), dataUsers).then(res => {\n      console.log(res, \"MASUK\");\n      localStorage.setItem(\"token\", res.data.token);\n      sessionStorage.setItem(\"data\", JSON.stringify(res.data.user));\n      setLoading(false);\n      history.push(\"/dashboard\");\n    }).catch(err => {\n      setLoading(false);\n    });\n  };\n\n  const hasError = field => formState.touched[field] && formState.errors[field] ? true : false;\n\n  if (!localStorage.getItem(\"token\")) {\n    return React.createElement(\"div\", {\n      className: classes.root,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      className: classes.grid,\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      className: classes.quoteContainer,\n      item: true,\n      lg: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.quote,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.quoteInner,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: classes.quoteText,\n      variant: \"h1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, \"Hella narwhal Cosby sweater McSweeney's, salvia kitsch before they sold out High Life.\"), React.createElement(\"div\", {\n      className: classes.person,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: classes.name,\n      variant: \"body1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, \"Takamaru Ayako\"), React.createElement(Typography, {\n      className: classes.bio,\n      variant: \"body2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, \"Manager at inVision\"))))), React.createElement(Grid, {\n      className: classes.content,\n      item: true,\n      lg: 7,\n      xs: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.content,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: classes.contentHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      onClick: handleBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(ArrowBackIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: classes.contentBody,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: classes.form,\n      onSubmit: handleSignIn,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Typography, {\n      className: classes.title,\n      variant: \"h2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(TextField, {\n      className: classes.textField,\n      error: hasError(\"email\"),\n      fullWidth: true,\n      helperText: hasError(\"email\") ? formState.errors.email[0] : null,\n      label: \"Email address\",\n      name: \"email\",\n      onChange: handleChange,\n      type: \"text\",\n      value: formState.values.email || \"\",\n      variant: \"outlined\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), React.createElement(TextField, {\n      className: classes.textField,\n      error: hasError(\"password\"),\n      fullWidth: true,\n      helperText: hasError(\"password\") ? formState.errors.password[0] : null,\n      label: \"Password\",\n      name: \"password\",\n      onChange: handleChange,\n      type: \"password\",\n      value: formState.values.password || \"\",\n      variant: \"outlined\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }), React.createElement(Button, {\n      className: classes.signInButton,\n      color: \"primary\",\n      disabled: !formState.isValid,\n      fullWidth: true,\n      size: \"large\",\n      type: \"submit\",\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, loading ? \"loading...\" : \"Sign in now\"), React.createElement(Typography, {\n      color: \"textSecondary\",\n      variant: \"body1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, \"Don't have an account?\", \" \", React.createElement(Link, {\n      component: RouterLink,\n      to: \"/sign-up\",\n      variant: \"h6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"Sign up\"))))))));\n  }\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object\n};\nexport default withRouter(SignIn);","map":{"version":3,"sources":["/home/dimas/git/react-dashboard/src/views/SignIn/SignIn.js"],"names":["React","useState","useEffect","Link","RouterLink","withRouter","PropTypes","validate","makeStyles","Grid","Button","IconButton","TextField","Typography","ArrowBackIcon","axios","apiDashManage","schema","email","presence","allowEmpty","message","length","maximum","password","useStyles","theme","root","backgroundColor","palette","background","default","height","grid","quoteContainer","breakpoints","down","display","quote","neutral","justifyContent","alignItems","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","quoteInner","textAlign","flexBasis","quoteText","color","white","fontWeight","name","marginTop","spacing","bio","contentContainer","content","flexDirection","contentHeader","paddingTop","paddingBototm","paddingLeft","paddingRight","logoImage","marginLeft","contentBody","flexGrow","form","paddingBottom","title","socialButtons","socialIcon","marginRight","sugestion","textField","signInButton","margin","SignIn","props","history","classes","loading","setLoading","isValid","values","touched","errors","formState","setFormState","handleBack","goBack","handleChange","event","persist","target","type","checked","value","handleSignIn","preventDefault","dataUsers","post","then","res","console","log","localStorage","setItem","data","token","sessionStorage","JSON","stringify","user","push","catch","err","hasError","field","getItem","person","propTypes","object"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link as RouterLink, withRouter } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport validate from \"validate.js\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Grid,\n  Button,\n  IconButton,\n  TextField,\n  Link,\n  Typography,\n} from \"@material-ui/core\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../api/api\";\n\nconst schema = {\n  email: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    email: true,\n    length: {\n      maximum: 64,\n    },\n  },\n  password: {\n    presence: { allowEmpty: false, message: \"is required\" },\n    length: {\n      maximum: 128,\n    },\n  },\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.default,\n    height: \"100%\",\n  },\n  grid: {\n    height: \"100%\",\n  },\n  quoteContainer: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\",\n    },\n  },\n  quote: {\n    backgroundColor: theme.palette.neutral,\n    height: \"100%\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    backgroundImage: \"url(/images/auth.jpg)\",\n    backgroundSize: \"cover\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundPosition: \"center\",\n  },\n  quoteInner: {\n    textAlign: \"center\",\n    flexBasis: \"600px\",\n  },\n  quoteText: {\n    color: theme.palette.white,\n    fontWeight: 300,\n  },\n  name: {\n    marginTop: theme.spacing(3),\n    color: theme.palette.white,\n  },\n  bio: {\n    color: theme.palette.white,\n  },\n  contentContainer: {},\n  content: {\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  contentHeader: {\n    display: \"flex\",\n    alignItems: \"center\",\n    paddingTop: theme.spacing(5),\n    paddingBototm: theme.spacing(2),\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n  },\n  logoImage: {\n    marginLeft: theme.spacing(4),\n  },\n  contentBody: {\n    flexGrow: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    [theme.breakpoints.down(\"md\")]: {\n      justifyContent: \"center\",\n    },\n  },\n  form: {\n    paddingLeft: 100,\n    paddingRight: 100,\n    paddingBottom: 125,\n    flexBasis: 700,\n    [theme.breakpoints.down(\"sm\")]: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n    },\n  },\n  title: {\n    marginTop: theme.spacing(3),\n  },\n  socialButtons: {\n    marginTop: theme.spacing(3),\n  },\n  socialIcon: {\n    marginRight: theme.spacing(1),\n  },\n  sugestion: {\n    marginTop: theme.spacing(2),\n  },\n  textField: {\n    marginTop: theme.spacing(2),\n  },\n  signInButton: {\n    margin: theme.spacing(2, 0),\n  },\n}));\n\nconst SignIn = (props) => {\n  const { history } = props;\n\n  const classes = useStyles();\n  const [loading, setLoading] = useState(false);\n  const [formState, setFormState] = useState({\n    isValid: false,\n    values: {},\n    touched: {},\n    errors: {},\n  });\n\n  useEffect(() => {\n    const errors = validate(formState.values, schema);\n\n    setFormState((formState) => ({\n      ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {},\n    }));\n  }, [formState.values]);\n\n  const handleBack = () => {\n    history.goBack();\n  };\n\n  const handleChange = (event) => {\n    event.persist();\n\n    setFormState((formState) => ({\n      ...formState,\n      values: {\n        ...formState.values,\n        [event.target.name]:\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value,\n      },\n      touched: {\n        ...formState.touched,\n        [event.target.name]: true,\n      },\n    }));\n  };\n\n  const handleSignIn = (event) => {\n    event.preventDefault();\n    setLoading(true);\n    const dataUsers = {\n      password: formState.values.password,\n      email: formState.values.email,\n    };\n    axios\n      .post(`${apiDashManage + \"sign-in\"}`, dataUsers)\n      .then((res) => {\n        console.log(res, \"MASUK\");\n        localStorage.setItem(\"token\", res.data.token);\n        sessionStorage.setItem(\"data\", JSON.stringify(res.data.user));\n        setLoading(false);\n        history.push(\"/dashboard\");\n      })\n      .catch((err) => {\n        setLoading(false);\n      });\n  };\n\n  const hasError = (field) =>\n    formState.touched[field] && formState.errors[field] ? true : false;\n  if (!localStorage.getItem(\"token\")) {\n    return (\n      <div className={classes.root}>\n        <Grid className={classes.grid} container>\n          <Grid className={classes.quoteContainer} item lg={5}>\n            <div className={classes.quote}>\n              <div className={classes.quoteInner}>\n                <Typography className={classes.quoteText} variant=\"h1\">\n                  Hella narwhal Cosby sweater McSweeney's, salvia kitsch before\n                  they sold out High Life.\n                </Typography>\n                <div className={classes.person}>\n                  <Typography className={classes.name} variant=\"body1\">\n                    Takamaru Ayako\n                  </Typography>\n                  <Typography className={classes.bio} variant=\"body2\">\n                    Manager at inVision\n                  </Typography>\n                </div>\n              </div>\n            </div>\n          </Grid>\n          <Grid className={classes.content} item lg={7} xs={12}>\n            <div className={classes.content}>\n              <div className={classes.contentHeader}>\n                <IconButton onClick={handleBack}>\n                  <ArrowBackIcon />\n                </IconButton>\n              </div>\n              <div className={classes.contentBody}>\n                <form className={classes.form} onSubmit={handleSignIn}>\n                  <Typography className={classes.title} variant=\"h2\">\n                    Sign in\n                  </Typography>\n\n                  <TextField\n                    className={classes.textField}\n                    error={hasError(\"email\")}\n                    fullWidth\n                    helperText={\n                      hasError(\"email\") ? formState.errors.email[0] : null\n                    }\n                    label=\"Email address\"\n                    name=\"email\"\n                    onChange={handleChange}\n                    type=\"text\"\n                    value={formState.values.email || \"\"}\n                    variant=\"outlined\"\n                  />\n                  <TextField\n                    className={classes.textField}\n                    error={hasError(\"password\")}\n                    fullWidth\n                    helperText={\n                      hasError(\"password\") ? formState.errors.password[0] : null\n                    }\n                    label=\"Password\"\n                    name=\"password\"\n                    onChange={handleChange}\n                    type=\"password\"\n                    value={formState.values.password || \"\"}\n                    variant=\"outlined\"\n                  />\n                  <Button\n                    className={classes.signInButton}\n                    color=\"primary\"\n                    disabled={!formState.isValid}\n                    fullWidth\n                    size=\"large\"\n                    type=\"submit\"\n                    variant=\"contained\"\n                  >\n                    {loading ? \"loading...\" : \"Sign in now\"}\n                  </Button>\n                  <Typography color=\"textSecondary\" variant=\"body1\">\n                    Don't have an account?{\" \"}\n                    <Link component={RouterLink} to=\"/sign-up\" variant=\"h6\">\n                      Sign up\n                    </Link>\n                  </Typography>\n                </form>\n              </div>\n            </div>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n};\n\nSignIn.propTypes = {\n  history: PropTypes.object,\n};\n\nexport default withRouter(SignIn);\n"]},"metadata":{},"sourceType":"module"}