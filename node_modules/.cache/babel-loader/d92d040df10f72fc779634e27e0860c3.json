{"ast":null,"code":"import _objectSpread from \"/home/dimas/git/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/dimas/git/react-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/dimas/git/react-dashboard/src/views/Category/Category.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport MaterialTable from \"material-table\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../api/api\";\nimport { CategoryContext } from \"../../context/categoryContext\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(0.5)\n  },\n  content: {\n    marginTop: theme.spacing(0)\n  }\n}));\nexport default function Categeory() {\n  const classes = useStyles();\n\n  const _useContext = useContext(CategoryContext),\n        _useContext2 = _slicedToArray(_useContext, 2),\n        categoryContext = _useContext2[0],\n        setCategoryContext = _useContext2[1];\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        nameCategory = _useState2[0],\n        setNameCategory = _useState2[1];\n\n  const _useState3 = useState({\n    columns: [{\n      title: \"Name\",\n      field: \"name\"\n    }],\n    data: [{\n      name: \"Daun\"\n    }, {\n      name: \"Pohon\"\n    }, {\n      name: \"Lontong\"\n    }]\n  }),\n        _useState4 = _slicedToArray(_useState3, 2),\n        state = _useState4[0],\n        setState = _useState4[1];\n\n  useEffect(() => {\n    handleGetCategory();\n  }, []);\n\n  const handleGetCategory = () => {\n    axios({\n      method: \"get\",\n      url: \"\".concat(apiDashManage + \"category\"),\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(res => {\n      // console.log(\"respon get category\", res.data.categories);\n      setNameCategory(res.data.categories);\n      setCategoryContext(res.data.categories);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(MaterialTable, {\n    className: classes.content,\n    title: \"Category\",\n    columns: state.columns,\n    data: nameCategory,\n    editable: {\n      onRowAdd: newData => new Promise(resolve => {\n        resolve();\n        setState(prevState => {\n          const data = [...prevState.data]; // data.push(newData);\n\n          axios({\n            method: \"post\",\n            url: \"\".concat(apiDashManage + \"category\"),\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            },\n            data: newData\n          }).then(res => {\n            //   console.log(\"masuk category\", res);\n            handleGetCategory();\n          });\n          return _objectSpread({}, prevState, {\n            data\n          });\n        });\n      }),\n      onRowUpdate: (newData, oldData) => new Promise(resolve => {\n        resolve();\n\n        if (oldData) {\n          setState(prevState => {\n            const data = [...prevState.data];\n            axios({\n              method: \"put\",\n              url: \"\".concat(apiDashManage + \"category\"),\n              headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n              },\n              data: {\n                name: newData.name,\n                id: newData._id\n              }\n            }).then(res => {\n              // console.log(\"edit category\", res);\n              handleGetCategory();\n            });\n            return _objectSpread({}, prevState, {\n              data\n            });\n          });\n        }\n      }),\n      onRowDelete: oldData => new Promise(resolve => {\n        resolve();\n        setState(prevState => {\n          const data = [...prevState.data];\n          axios({\n            method: \"delete\",\n            url: \"\".concat(apiDashManage + \"\".concat(\"category/\" + oldData._id)),\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n            }\n          }).then(res => {\n            //   console.log(\"delete category\", res);\n            handleGetCategory();\n          });\n          return _objectSpread({}, prevState, {\n            data\n          });\n        });\n      })\n    },\n    options: {\n      headerStyle: {\n        fontSize: \"15px\",\n        fontWeight: \"bold\",\n        borderRight: \"1px solid #fff\",\n        background: \"#358A7C\",\n        color: \"#fff\"\n      },\n      rowStyle: {\n        fontFamily: \"Roboto,Helvetica,Arial,sans-serif\"\n      },\n      exportButton: true\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }));\n}","map":{"version":3,"sources":["/home/dimas/git/react-dashboard/src/views/Category/Category.js"],"names":["React","useState","useEffect","useContext","makeStyles","MaterialTable","axios","apiDashManage","CategoryContext","useStyles","theme","root","padding","spacing","content","marginTop","Categeory","classes","categoryContext","setCategoryContext","nameCategory","setNameCategory","columns","title","field","data","name","state","setState","handleGetCategory","method","url","headers","Authorization","localStorage","getItem","then","res","categories","onRowAdd","newData","Promise","resolve","prevState","onRowUpdate","oldData","id","_id","onRowDelete","headerStyle","fontSize","fontWeight","borderRight","background","color","rowStyle","fontFamily","exportButton"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport MaterialTable from \"material-table\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../api/api\";\nimport { CategoryContext } from \"../../context/categoryContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    padding: theme.spacing(0.5),\n  },\n  content: {\n    marginTop: theme.spacing(0),\n  },\n}));\n\nexport default function Categeory() {\n  const classes = useStyles();\n  const [categoryContext, setCategoryContext] = useContext(CategoryContext);\n  const [nameCategory, setNameCategory] = useState([]);\n  const [state, setState] = useState({\n    columns: [{ title: \"Name\", field: \"name\" }],\n    data: [\n      {\n        name: \"Daun\",\n      },\n      {\n        name: \"Pohon\",\n      },\n      {\n        name: \"Lontong\",\n      },\n    ],\n  });\n\n  useEffect(() => {\n    handleGetCategory();\n  }, []);\n\n  const handleGetCategory = () => {\n    axios({\n      method: \"get\",\n      url: `${apiDashManage + \"category\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n    }).then((res) => {\n      // console.log(\"respon get category\", res.data.categories);\n      setNameCategory(res.data.categories);\n      setCategoryContext(res.data.categories);\n    });\n  };\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        className={classes.content}\n        title=\"Category\"\n        columns={state.columns}\n        data={nameCategory}\n        editable={{\n          onRowAdd: (newData) =>\n            new Promise((resolve) => {\n              resolve();\n              setState((prevState) => {\n                const data = [...prevState.data];\n                // data.push(newData);\n                axios({\n                  method: \"post\",\n                  url: `${apiDashManage + \"category\"}`,\n                  headers: {\n                    Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n                  },\n                  data: newData,\n                }).then((res) => {\n                  //   console.log(\"masuk category\", res);\n                  handleGetCategory();\n                });\n                return { ...prevState, data };\n              });\n            }),\n          onRowUpdate: (newData, oldData) =>\n            new Promise((resolve) => {\n              resolve();\n              if (oldData) {\n                setState((prevState) => {\n                  const data = [...prevState.data];\n                  axios({\n                    method: \"put\",\n                    url: `${apiDashManage + \"category\"}`,\n                    headers: {\n                      Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n                    },\n                    data: {\n                      name: newData.name,\n                      id: newData._id,\n                    },\n                  }).then((res) => {\n                    // console.log(\"edit category\", res);\n                    handleGetCategory();\n                  });\n                  return { ...prevState, data };\n                });\n              }\n            }),\n          onRowDelete: (oldData) =>\n            new Promise((resolve) => {\n              resolve();\n              setState((prevState) => {\n                const data = [...prevState.data];\n                axios({\n                  method: \"delete\",\n                  url: `${apiDashManage + `${\"category/\" + oldData._id}`}`,\n                  headers: {\n                    Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n                  },\n                }).then((res) => {\n                  //   console.log(\"delete category\", res);\n                  handleGetCategory();\n                });\n                return { ...prevState, data };\n              });\n            }),\n        }}\n        options={{\n          headerStyle: {\n            fontSize: \"15px\",\n            fontWeight: \"bold\",\n            borderRight: \"1px solid #fff\",\n            background: \"#358A7C\",\n            color: \"#fff\",\n          },\n          rowStyle: {\n            fontFamily: \"Roboto,Helvetica,Arial,sans-serif\",\n          },\n          exportButton: true,\n        }}\n      />\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}