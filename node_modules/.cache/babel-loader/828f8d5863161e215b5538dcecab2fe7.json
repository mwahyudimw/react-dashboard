{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/views/Account/components/AccountProfile/AccountProfile.js\";\nimport React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { Card, CardActions, CardContent, Avatar, Typography, Divider, Button } from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../../../api/api\";\nimport Swal from \"sweetalert2\";\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  details: {\n    display: \"flex\"\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0\n  },\n  progress: {\n    marginTop: theme.spacing(2)\n  },\n  uploadButton: {\n    marginRight: theme.spacing(2)\n  }\n}));\n\nconst AccountProfile = props => {\n  const {\n    className,\n    ...rest\n  } = props;\n  const classes = useStyles();\n  const [loading, setLoading] = React.useState(false);\n  const DataUser = JSON.parse(localStorage.getItem(\"data\"));\n  const [picture, setPicture] = useState({\n    picture: `http://dashmanage.herokuapp.com/${DataUser.picture}`,\n    image: \"\"\n  });\n  const [user, setUser] = useState({\n    name: \"\",\n    avatar: \"\"\n  });\n  useEffect(() => {\n    const DataUser = JSON.parse(localStorage.getItem(\"data\"));\n    setUser(user => ({ ...user,\n      username: DataUser.username,\n      avatar: `http://dashmanage.herokuapp.com/${DataUser.picture}`\n    }));\n  }, []);\n\n  const updateImage = () => {\n    setLoading(true);\n    console.log(picture.image);\n    const formdata = new FormData();\n    formdata.append(\"image\", picture.image);\n    console.log(formdata);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"update/pict-user\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      },\n      data: formdata\n    }).then(res => {\n      setLoading(false);\n      Swal.fire(\"Good job!\", \"Update success\", \"success\");\n      localStorage.setItem(\"data\", JSON.stringify(res.data.result));\n    }).catch(err => {\n      setLoading(false);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Check your connections\",\n        text: \"\"\n      });\n    });\n  };\n\n  const onImageChange = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setPicture(picture => ({ ...picture,\n        image: file,\n        picture: reader.result\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  return /*#__PURE__*/React.createElement(Card, Object.assign({}, rest, {\n    className: clsx(classes.root, className),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    id: \"myform\",\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    gutterBottom: true,\n    variant: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, user.username)), /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    src: picture.picture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      position: \"absolute\",\n      marginTop: \"40px\",\n      cursor: \"pointer\"\n    },\n    type: \"file\",\n    onChange: onImageChange,\n    name: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: updateImage,\n    className: classes.uploadButton,\n    color: \"primary\",\n    variant: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, loading ? \"loading...\" : \"Upload picture\"))));\n};\n\nAccountProfile.propTypes = {\n  className: PropTypes.string\n};\nexport default AccountProfile;","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/views/Account/components/AccountProfile/AccountProfile.js"],"names":["React","useEffect","useState","PropTypes","clsx","makeStyles","Card","CardActions","CardContent","Avatar","Typography","Divider","Button","axios","apiDashManage","Swal","useStyles","theme","root","details","display","avatar","marginLeft","height","width","flexShrink","flexGrow","progress","marginTop","spacing","uploadButton","marginRight","AccountProfile","props","className","rest","classes","loading","setLoading","DataUser","JSON","parse","localStorage","getItem","picture","setPicture","image","user","setUser","name","username","updateImage","console","log","formdata","FormData","append","method","url","headers","Authorization","data","then","res","fire","setItem","stringify","result","catch","err","icon","title","text","onImageChange","e","preventDefault","reader","FileReader","file","target","files","onloadend","readAsDataURL","position","cursor","propTypes","string"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport clsx from \"clsx\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  Avatar,\n  Typography,\n  Divider,\n  Button,\n} from \"@material-ui/core\";\nimport axios from \"axios\";\nimport { apiDashManage } from \"../../../../api/api\";\nimport Swal from \"sweetalert2\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  details: {\n    display: \"flex\",\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0,\n  },\n  progress: {\n    marginTop: theme.spacing(2),\n  },\n  uploadButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst AccountProfile = (props) => {\n  const { className, ...rest } = props;\n\n  const classes = useStyles();\n  const [loading, setLoading] = React.useState(false);\n  const DataUser = JSON.parse(localStorage.getItem(\"data\"));\n  const [picture, setPicture] = useState({\n    picture: `http://dashmanage.herokuapp.com/${DataUser.picture}`,\n    image: \"\",\n  });\n  const [user, setUser] = useState({\n    name: \"\",\n    avatar: \"\",\n  });\n\n  useEffect(() => {\n    const DataUser = JSON.parse(localStorage.getItem(\"data\"));\n    setUser((user) => ({\n      ...user,\n      username: DataUser.username,\n      avatar: `http://dashmanage.herokuapp.com/${DataUser.picture}`,\n    }));\n  }, []);\n\n  const updateImage = () => {\n    setLoading(true);\n    console.log(picture.image);\n    const formdata = new FormData();\n    formdata.append(\"image\", picture.image);\n\n    console.log(formdata);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"update/pict-user\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        setLoading(false);\n        Swal.fire(\"Good job!\", \"Update success\", \"success\");\n        localStorage.setItem(\"data\", JSON.stringify(res.data.result));\n      })\n      .catch((err) => {\n        setLoading(false);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Check your connections\",\n          text: \"\",\n        });\n      });\n  };\n\n  const onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setPicture((picture) => ({\n        ...picture,\n        image: file,\n        picture: reader.result,\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n  return (\n    <Card {...rest} className={clsx(classes.root, className)}>\n      <form id=\"myform\" encType=\"multipart/form-data\">\n        <CardContent>\n          <div className={classes.details}>\n            <div>\n              <Typography gutterBottom variant=\"h2\">\n                {user.username}\n              </Typography>\n            </div>\n            <Avatar className={classes.avatar} src={picture.picture} />\n            <input\n              style={{\n                position: \"absolute\",\n                marginTop: \"40px\",\n                cursor: \"pointer\",\n              }}\n              type=\"file\"\n              onChange={onImageChange}\n              name=\"image\"\n            />\n          </div>\n        </CardContent>\n        <Divider />\n        <CardActions>\n          <Button\n            onClick={updateImage}\n            className={classes.uploadButton}\n            color=\"primary\"\n            variant=\"text\"\n          >\n            {loading ? \"loading...\" : \"Upload picture\"}\n          </Button>\n        </CardActions>\n      </form>\n    </Card>\n  );\n};\n\nAccountProfile.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default AccountProfile;\n"]},"metadata":{},"sourceType":"module"}