{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js\";\nimport React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\nlet ContextType;\nconst {\n  Provider,\n  Consumer\n} = ContextType = React.createContext();\n\nclass ArticleProvider extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      article: [],\n      snackbar: {\n        loadArticle: true,\n        open: false,\n        title: \"\",\n        severity: \"\",\n        vertical: \"top\",\n        horizontal: \"right\"\n      },\n      loading: false,\n      values: {\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        imgrequest: null,\n        picture: \"https://placehold.it/500x600\",\n        figurethumbnails: \"\"\n      },\n      loadArticle: {\n        uploadThumbnail: false,\n        articleAdd: false\n      }\n    };\n\n    this.getArticle = async () => {\n      const response = await axios({\n        method: \"get\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const responseJson = await response;\n\n      if (responseJson.error) {\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Your article empty, please make first article !\",\n            severity: \"info\"\n          }\n        }));\n      } else {\n        this.setState(prevState => ({\n          article: responseJson.data.articles,\n          snackbar: { ...prevState.snackbar,\n            open: false,\n            loadArticle: false\n          }\n        }));\n      }\n    };\n\n    this.onClose = () => {\n      this.setState(prevState => ({\n        snackbar: { ...prevState.snackbar,\n          open: false\n        }\n      }));\n    };\n\n    this.handleChange = e => {\n      e.persist();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          title: e.target.value\n        }\n      }));\n      console.log(e.target.value);\n    };\n\n    this.handleTags = newValue => {\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          tags: newValue\n        }\n      }));\n    };\n\n    this.handleEditor = (event, editor) => {\n      const data = editor.getData();\n      this.setState(prevState => ({\n        values: { ...prevState.values,\n          description: data\n        }\n      }));\n    };\n\n    this.onImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      let file = e.target.files[0];\n\n      reader.onloadend = () => {\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            image: file,\n            picture: reader.result,\n            figurethumbnails: file.name\n          }\n        }));\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.addImage = () => {\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          uploadThumbnail: true\n        }\n      }));\n      const formdata = new FormData();\n      formdata.append(\"image\", this.state.values.image);\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}image`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: formdata\n      }).then(res => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            imgrequest: res.data.thumbnail\n          }\n        }));\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            uploadThumbnail: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n\n    this.addArticle = e => {\n      e.preventDefault();\n      this.setState(prevState => ({\n        loadArticle: { ...prevState.loadArticle,\n          articleAdd: true\n        }\n      }));\n      const dataArticle = {\n        title: this.state.values.title,\n        tags: this.state.values.tags,\n        thumbnail: this.state.values.imgrequest,\n        description: this.state.values.description\n      };\n      axios({\n        method: \"post\",\n        url: `${apiDashManage}article`,\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        },\n        data: dataArticle\n      }).then(res => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n        this.getArticle();\n      }).catch(err => {\n        this.setState(prevState => ({\n          loadArticle: { ...prevState.loadArticle,\n            articleAdd: false\n          }\n        }));\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n        this.setState(prevState => ({\n          values: { ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\"\n          }\n        }));\n      });\n    };\n\n    this.deleteArticle = id => {\n      this.setState({\n        loading: true\n      });\n      axios.delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      }).then(() => {\n        this.setState({\n          loading: true\n        });\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\"\n          }\n        }));\n        this.getArticle();\n      }).catch(() => {\n        this.setState({\n          loading: true\n        });\n        this.setState(prevState => ({\n          snackbar: { ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\"\n          }\n        }));\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  render() {\n    const {\n      children\n    } = this.props;\n    const {\n      state\n    } = this;\n    return /*#__PURE__*/React.createElement(Provider, {\n      value: { ...state,\n        onClose: this.onClose,\n        deleteArticle: this.deleteArticle,\n        handleChange: this.handleChange,\n        handleTags: this.handleTags,\n        onImageChange: this.onImageChange,\n        addImage: this.addImage,\n        handleEditor: this.handleEditor,\n        addArticle: this.addArticle\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 7\n      }\n    }, children);\n  }\n\n}\n\nexport { Provider, Consumer, ContextType, ArticleProvider };","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/context/articleContext.js"],"names":["React","apiDashManage","axios","ContextType","Provider","Consumer","createContext","ArticleProvider","Component","state","article","snackbar","loadArticle","open","title","severity","vertical","horizontal","loading","values","tags","description","image","imgrequest","picture","figurethumbnails","uploadThumbnail","articleAdd","getArticle","response","method","url","headers","Authorization","localStorage","getItem","responseJson","error","setState","prevState","data","articles","onClose","handleChange","e","persist","target","value","console","log","handleTags","newValue","handleEditor","event","editor","getData","onImageChange","preventDefault","reader","FileReader","file","files","onloadend","result","name","readAsDataURL","addImage","formdata","FormData","append","then","res","thumbnail","catch","err","addArticle","dataArticle","deleteArticle","id","delete","componentDidMount","render","children","props"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { apiDashManage } from \"../api/api\";\nimport axios from \"axios\";\n\nlet ContextType;\nconst { Provider, Consumer } = (ContextType = React.createContext());\n\nclass ArticleProvider extends React.Component {\n  state = {\n    article: [],\n    snackbar: {\n      loadArticle: true,\n      open: false,\n      title: \"\",\n      severity: \"\",\n      vertical: \"top\",\n      horizontal: \"right\",\n    },\n    loading: false,\n    values: {\n      title: \"\",\n      tags: [],\n      description: \"\",\n      image: null,\n      imgrequest: null,\n      picture: \"https://placehold.it/500x600\",\n      figurethumbnails: \"\",\n    },\n    loadArticle: {\n      uploadThumbnail: false,\n      articleAdd: false,\n    },\n  };\n\n  componentDidMount() {\n    this.getArticle();\n  }\n\n  getArticle = async () => {\n    const response = await axios({\n      method: \"get\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n    });\n    const responseJson = await response;\n    if (responseJson.error) {\n      this.setState((prevState) => ({\n        snackbar: {\n          ...prevState.snackbar,\n          open: true,\n          title: \"Your article empty, please make first article !\",\n          severity: \"info\",\n        },\n      }));\n    } else {\n      this.setState((prevState) => ({\n        article: responseJson.data.articles,\n        snackbar: {\n          ...prevState.snackbar,\n          open: false,\n          loadArticle: false,\n        },\n      }));\n    }\n  };\n\n  onClose = () => {\n    this.setState((prevState) => ({\n      snackbar: {\n        ...prevState.snackbar,\n        open: false,\n      },\n    }));\n  };\n\n  handleChange = (e) => {\n    e.persist();\n\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        title: e.target.value,\n      },\n    }));\n\n    console.log(e.target.value);\n  };\n\n  handleTags = (newValue) => {\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        tags: newValue,\n      },\n    }));\n  };\n\n  handleEditor = (event, editor) => {\n    const data = editor.getData();\n    this.setState((prevState) => ({\n      values: {\n        ...prevState.values,\n        description: data,\n      },\n    }));\n  };\n\n  onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      this.setState((prevState) => ({\n        values: {\n          ...prevState.values,\n          image: file,\n          picture: reader.result,\n          figurethumbnails: file.name,\n        },\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  addImage = () => {\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        uploadThumbnail: true,\n      },\n    }));\n\n    const formdata = new FormData();\n    formdata.append(\"image\", this.state.values.image);\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}image`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Good job, upload success !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            imgrequest: res.data.thumbnail,\n          },\n        }));\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            uploadThumbnail: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  addArticle = (e) => {\n    e.preventDefault();\n\n    this.setState((prevState) => ({\n      loadArticle: {\n        ...prevState.loadArticle,\n        articleAdd: true,\n      },\n    }));\n\n    const dataArticle = {\n      title: this.state.values.title,\n      tags: this.state.values.tags,\n      thumbnail: this.state.values.imgrequest,\n      description: this.state.values.description,\n    };\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then((res) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been created !\",\n            severity: \"success\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n        this.getArticle();\n      })\n      .catch((err) => {\n        this.setState((prevState) => ({\n          loadArticle: {\n            ...prevState.loadArticle,\n            articleAdd: false,\n          },\n        }));\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n        this.setState((prevState) => ({\n          values: {\n            ...prevState.values,\n            title: \"\",\n            tags: [],\n            description: \"\",\n            image: \"\",\n            picture: \"\",\n            imgrequest: null,\n            figurethumbnails: \"\",\n          },\n        }));\n      });\n  };\n\n  deleteArticle = (id) => {\n    this.setState({\n      loading: true,\n    });\n    axios\n      .delete(`${apiDashManage}article/${id}`, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n        },\n      })\n      .then(() => {\n        this.setState({\n          loading: true,\n        });\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Article has been deleted !\",\n            severity: \"success\",\n          },\n        }));\n\n        this.getArticle();\n      })\n      .catch(() => {\n        this.setState({\n          loading: true,\n        });\n        this.setState((prevState) => ({\n          snackbar: {\n            ...prevState.snackbar,\n            open: true,\n            title: \"Check your connection !\",\n            severity: \"error\",\n          },\n        }));\n      });\n  };\n\n  render() {\n    const { children } = this.props;\n    const { state } = this;\n    return (\n      <Provider\n        value={{\n          ...state,\n          onClose: this.onClose,\n          deleteArticle: this.deleteArticle,\n          handleChange: this.handleChange,\n          handleTags: this.handleTags,\n          onImageChange: this.onImageChange,\n          addImage: this.addImage,\n          handleEditor: this.handleEditor,\n          addArticle: this.addArticle,\n        }}\n      >\n        {children}\n      </Provider>\n    );\n  }\n}\n\nexport { Provider, Consumer, ContextType, ArticleProvider };\n"]},"metadata":{},"sourceType":"module"}