{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/ManageArticle.js\";\nimport React, { useState } from \"react\";\nimport { Card, CardHeader, CardContent, CardActions, Divider, Avatar, Button, TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { apiDashManage } from \"../../../api/api\";\nimport { ArticleContext } from \"../../../context/articleContext\";\nimport Swal from \"sweetalert2\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport CreatableSelect from \"react-select/creatable\";\nimport makeAnimated from \"react-select/animated\";\nimport axios from \"axios\";\nconst customStyles = {\n  container: () => ({\n    marginBottom: \"1rem\",\n    marginTop: \"1rem\"\n  }),\n  menu: () => ({\n    width: \"100%\"\n  })\n};\nconst animatedComponents = makeAnimated();\nconst useStyles = makeStyles(theme => ({\n  root: {},\n  details: {\n    display: \"flex\"\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0\n  },\n  progress: {\n    marginTop: theme.spacing(2)\n  },\n  uploadButton: {\n    marginRight: theme.spacing(2)\n  }\n}));\n\nconst ManageArticle = () => {\n  const classes = useStyles();\n  const [values, setValues] = useState({\n    title: \"\",\n    tags: [],\n    description: \"\",\n    image: null,\n    picture: \"https://placehold.it/500x600\",\n    figurethumbnails: \"\"\n  });\n  const [loading, setLoading] = useState(true);\n  const [loadArticle, setLoadArtile] = useState(false);\n  const [article, setArticle] = React.useContext(ArticleContext);\n\n  const handleChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleTags = newValue => {\n    setValues(values => ({ ...values,\n      tags: newValue\n    }));\n  };\n\n  const onImageChange = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setLoading(false);\n      setValues(values => ({ ...values,\n        image: file,\n        figurethumbnails: file.name\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const updateImage = () => {\n    console.log(values.image);\n    const formdata = new FormData();\n    formdata.append(\"image\", values.image);\n    console.log(formdata);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"image\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      },\n      data: formdata\n    }).then(res => {\n      Swal.fire(\"Good job!\", \"Update success\", \"success\");\n      localStorage.setItem(\"data\", JSON.stringify(res.data.result));\n    }).catch(err => {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Check your connections\",\n        text: \"\"\n      });\n    });\n  };\n\n  const addArticle = e => {\n    e.preventDefault();\n    setLoadArtile(true); // const formData = new FormData();\n    // for (let i = 0; i < values.tags.length; i++) {\n    //   const arr = values.tags[i];\n    //   formData.append(\"tags\", JSON.stringify(arr));\n    // }\n    // formData.append(\"title\", values.title);\n    // formData.append(\"description\", values.description);\n\n    let tags;\n\n    for (let i = 0; i < values.tags.length; i++) {\n      const arr = values.tags[i];\n      tags = JSON.stringify(arr);\n    }\n\n    const dataArticle = {\n      title: values.title,\n      tags: tags,\n      description: values.description\n    };\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      data: dataArticle\n    }).then(res => {\n      setLoadArtile(false);\n      Swal.fire(\"Success !\", \"Article has been created\", \"success\");\n      setValues(values => ({ ...values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        figurethumbnails: \"\"\n      }));\n      console.log(res);\n    }).catch(err => {\n      setLoadArtile(false);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Check your connections\",\n        text: \"\"\n      });\n      setValues(values => ({ ...values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: null,\n        figurethumbnails: \"\"\n      }));\n      console.log(err);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    subheader: \"Manage your Article\",\n    title: \"Article\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    id: \"myform\",\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    src: values.picture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      position: \"absolute\",\n      marginTop: \"40px\",\n      cursor: \"pointer\"\n    },\n    type: \"file\",\n    onChange: onImageChange,\n    name: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: updateImage,\n    className: classes.uploadButton,\n    color: \"primary\",\n    variant: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 13\n    }\n  }, \"Upload Thumbnail\"))), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Title\",\n    name: \"title\",\n    onChange: handleChange,\n    type: \"text\",\n    value: values.title,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(CreatableSelect, {\n    isMulti: true,\n    onChange: handleTags,\n    components: animatedComponents,\n    styles: customStyles,\n    placeholder: \"Add more tags...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(CKEditor, {\n    editor: ClassicEditor,\n    onChange: (event, editor) => {\n      const data = editor.getData();\n      setValues(values => ({ ...values,\n        description: data\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    onClick: addArticle,\n    disabled: loadArticle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 11\n    }\n  }, loadArticle ? \"Loading ...\" : \"Add Article\"))));\n};\n\nexport default ManageArticle;","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/ManageArticle.js"],"names":["React","useState","Card","CardHeader","CardContent","CardActions","Divider","Avatar","Button","TextField","Typography","makeStyles","apiDashManage","ArticleContext","Swal","CKEditor","ClassicEditor","CreatableSelect","makeAnimated","axios","customStyles","container","marginBottom","marginTop","menu","width","animatedComponents","useStyles","theme","root","details","display","avatar","marginLeft","height","flexShrink","flexGrow","progress","spacing","uploadButton","marginRight","ManageArticle","classes","values","setValues","title","tags","description","image","picture","figurethumbnails","loading","setLoading","loadArticle","setLoadArtile","article","setArticle","useContext","handleChange","event","target","name","value","handleTags","newValue","onImageChange","e","preventDefault","reader","FileReader","file","files","onloadend","readAsDataURL","updateImage","console","log","formdata","FormData","append","method","url","headers","Authorization","localStorage","getItem","data","then","res","fire","setItem","JSON","stringify","result","catch","err","icon","text","addArticle","i","length","arr","dataArticle","position","cursor","editor","getData","justifyContent"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Divider,\n  Avatar,\n  Button,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { apiDashManage } from \"../../../api/api\";\nimport { ArticleContext } from \"../../../context/articleContext\";\nimport Swal from \"sweetalert2\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport CreatableSelect from \"react-select/creatable\";\nimport makeAnimated from \"react-select/animated\";\nimport axios from \"axios\";\n\nconst customStyles = {\n  container: () => ({\n    marginBottom: \"1rem\",\n    marginTop: \"1rem\",\n  }),\n  menu: () => ({\n    width: \"100%\",\n  }),\n};\n\nconst animatedComponents = makeAnimated();\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  details: {\n    display: \"flex\",\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0,\n  },\n  progress: {\n    marginTop: theme.spacing(2),\n  },\n  uploadButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst ManageArticle = () => {\n  const classes = useStyles();\n\n  const [values, setValues] = useState({\n    title: \"\",\n    tags: [],\n    description: \"\",\n    image: null,\n    picture: \"https://placehold.it/500x600\",\n    figurethumbnails: \"\",\n  });\n  const [loading, setLoading] = useState(true);\n  const [loadArticle, setLoadArtile] = useState(false);\n  const [article, setArticle] = React.useContext(ArticleContext);\n\n  const handleChange = (event) => {\n    setValues({\n      ...values,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleTags = (newValue) => {\n    setValues((values) => ({\n      ...values,\n      tags: newValue,\n    }));\n  };\n\n  const onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setLoading(false);\n      setValues((values) => ({\n        ...values,\n        image: file,\n        figurethumbnails: file.name,\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const updateImage = () => {\n    console.log(values.image);\n    const formdata = new FormData();\n    formdata.append(\"image\", values.image);\n\n    console.log(formdata);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage + \"image\"}`,\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        Swal.fire(\"Good job!\", \"Update success\", \"success\");\n        localStorage.setItem(\"data\", JSON.stringify(res.data.result));\n      })\n      .catch((err) => {\n        Swal.fire({\n          icon: \"error\",\n          title: \"Check your connections\",\n          text: \"\",\n        });\n      });\n  };\n\n  const addArticle = (e) => {\n    e.preventDefault();\n    setLoadArtile(true);\n\n    // const formData = new FormData();\n    // for (let i = 0; i < values.tags.length; i++) {\n    //   const arr = values.tags[i];\n    //   formData.append(\"tags\", JSON.stringify(arr));\n    // }\n    // formData.append(\"title\", values.title);\n    // formData.append(\"description\", values.description);\n\n    let tags;\n\n    for (let i = 0; i < values.tags.length; i++) {\n      const arr = values.tags[i];\n      tags = JSON.stringify(arr);\n    }\n\n    const dataArticle = {\n      title: values.title,\n      tags: tags,\n      description: values.description,\n    };\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: dataArticle,\n    })\n      .then((res) => {\n        setLoadArtile(false);\n        Swal.fire(\"Success !\", \"Article has been created\", \"success\");\n\n        setValues((values) => ({\n          ...values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          figurethumbnails: \"\",\n        }));\n        console.log(res);\n      })\n      .catch((err) => {\n        setLoadArtile(false);\n        Swal.fire({\n          icon: \"error\",\n          title: \"Check your connections\",\n          text: \"\",\n        });\n        setValues((values) => ({\n          ...values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: null,\n          figurethumbnails: \"\",\n        }));\n        console.log(err);\n      });\n  };\n\n  return (\n    <>\n      <Card>\n        <CardHeader subheader=\"Manage your Article\" title=\"Article\" />\n        <Divider />\n        <form id=\"myform\" encType=\"multipart/form-data\">\n          <CardContent>\n            <div className={classes.details}>\n              <Avatar className={classes.avatar} src={values.picture} />\n              <input\n                style={{\n                  position: \"absolute\",\n                  marginTop: \"40px\",\n                  cursor: \"pointer\",\n                }}\n                type=\"file\"\n                onChange={onImageChange}\n                name=\"image\"\n              />\n            </div>\n          </CardContent>\n          <Divider />\n          <CardActions>\n            <Button\n              onClick={updateImage}\n              className={classes.uploadButton}\n              color=\"primary\"\n              variant=\"text\"\n            >\n              Upload Thumbnail\n            </Button>\n          </CardActions>\n        </form>\n\n        <CardContent>\n          <TextField\n            fullWidth\n            label=\"Title\"\n            name=\"title\"\n            onChange={handleChange}\n            type=\"text\"\n            value={values.title}\n            variant=\"outlined\"\n          />\n\n          <CreatableSelect\n            isMulti\n            onChange={handleTags}\n            components={animatedComponents}\n            styles={customStyles}\n            placeholder=\"Add more tags...\"\n          />\n          <CKEditor\n            editor={ClassicEditor}\n            onChange={(event, editor) => {\n              const data = editor.getData();\n              setValues((values) => ({\n                ...values,\n                description: data,\n              }));\n            }}\n          />\n          {/* <form encType=\"multipart/form-data\">\n            <Button\n              color=\"primary\"\n              variant=\"outlined\"\n              component=\"label\"\n              style={{ marginTop: \"1rem\" }}\n            >\n              Upload Thumbnail\n              <input\n                type=\"file\"\n                name=\"image\"\n                style={{ display: \"none\" }}\n                onChange={onImageChange}\n              />\n            </Button>\n            <Typography variant=\"body1\" style={{ marginTop: 25 }}>\n              {loading ? \"No file choosen\" : values.figurethumbnails}\n            </Typography>\n          </form> */}\n        </CardContent>\n        <Divider />\n        <CardActions style={{ justifyContent: \"center\" }}>\n          <Button\n            color=\"primary\"\n            variant=\"outlined\"\n            onClick={addArticle}\n            disabled={loadArticle}\n          >\n            {loadArticle ? \"Loading ...\" : \"Add Article\"}\n          </Button>\n        </CardActions>\n      </Card>\n    </>\n  );\n};\n\nexport default ManageArticle;\n"]},"metadata":{},"sourceType":"module"}