{"ast":null,"code":"var _jsxFileName = \"/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/Edit.js\";\nimport React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Card, CardHeader, CardContent, CardActions, Divider, Button, TextField, Avatar } from \"@material-ui/core\";\nimport { apiDashManage } from \"../../../api/api\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport CreatableSelect from \"react-select/creatable\";\nimport makeAnimated from \"react-select/animated\";\nimport axios from \"axios\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\n\nfunction Alert(props) {\n  return /*#__PURE__*/React.createElement(MuiAlert, Object.assign({\n    elevation: 6,\n    variant: \"filled\"\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 10\n    }\n  }));\n}\n\nconst useStyles = makeStyles(theme => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3)\n  },\n  details: {\n    display: \"flex\"\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0\n  },\n  uploadButton: {\n    marginRight: theme.spacing(2)\n  }\n}));\nconst customStyles = {\n  container: () => ({\n    marginBottom: \"1rem\",\n    marginTop: \"1rem\"\n  }),\n  menu: () => ({\n    width: \"100%\"\n  })\n};\nconst animatedComponents = makeAnimated();\nexport default function Edit({\n  open,\n  handleClose\n}) {\n  const classes = useStyles();\n  const [loadArticle, setLoadArtile] = useState({\n    loadingArticle: false,\n    editThumbnail: false\n  });\n  const [values, setValues] = useState({\n    title: \"\",\n    tags: [],\n    description: \"\",\n    image: null,\n    imgrequest: null,\n    picture: \"https://placehold.it/500x600\",\n    figurethumbnails: \"\"\n  });\n  const [state, setState] = React.useState({\n    open: false,\n    title: \"\",\n    severity: \"\",\n    vertical: \"top\",\n    horizontal: \"right\"\n  });\n\n  const handleChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const handleTags = newValue => {\n    setValues(values => ({ ...values,\n      tags: newValue\n    }));\n  };\n\n  const onImageChange = e => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setValues(values => ({ ...values,\n        image: file,\n        picture: reader.result,\n        figurethumbnails: file.name\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const addImage = () => {\n    setLoadArtile(loadingArticle => ({ ...loadingArticle,\n      editThumbnail: true\n    }));\n    const formdata = new FormData();\n    formdata.append(\"image\", values.image);\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}image`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      data: formdata\n    }).then(res => {\n      setLoadArtile(loadingArticle => ({ ...loadingArticle,\n        editThumbnail: false\n      }));\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Good job success !\",\n        severity: \"success\"\n      }));\n      setValues(values => ({ ...values,\n        imgrequest: res.data.thumbnail\n      }));\n    }).catch(err => {\n      setLoadArtile(loadingArticle => ({ ...loadingArticle,\n        editThumbnail: false\n      }));\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Check your connection !\",\n        severity: \"error\"\n      }));\n    });\n  };\n\n  const editArticle = e => {\n    e.preventDefault();\n    setLoadArtile(loadArticle => ({ ...loadArticle,\n      loadingArticle: true\n    })); // const dataArticle = {\n    //   title: values.title,\n    //   tags: values.tags,\n    //   thumbnail: values.imgrequest,\n    //   description: values.description,\n    // };\n\n    let formData = new FormData();\n    formData.append(\"title\", values.title);\n\n    for (let i = 0; i > values.tags.length; i++) {\n      const arr = values.tags[i];\n      formData.append(\"tags\", arr);\n    }\n\n    formData.append(\"thumbnail\", values.imgrequest);\n    formData.append(\"description\", values.description);\n    axios({\n      method: \"put\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      },\n      data: formData\n    }).then(res => {\n      setLoadArtile(loadArticle => ({ ...loadArticle,\n        loadingArticle: false\n      }));\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Article has been edited !\",\n        severity: \"success\"\n      }));\n      setValues(values => ({ ...values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: \"\",\n        picture: \"\",\n        imgrequest: null,\n        figurethumbnails: \"\"\n      }));\n    }).catch(err => {\n      setLoadArtile(loadArticle => ({ ...loadArticle,\n        loadingArticle: false\n      }));\n      setState(state => ({ ...state,\n        open: true,\n        title: \"Check your connection !\",\n        severity: \"error\"\n      }));\n      setValues(values => ({ ...values,\n        title: \"\",\n        tags: [],\n        description: \"\",\n        image: \"\",\n        picture: \"\",\n        imgrequest: null,\n        figurethumbnails: \"\"\n      }));\n    });\n  };\n\n  const {\n    severity,\n    title,\n    vertical,\n    horizontal\n  } = state;\n  const {\n    loadingArticle,\n    editThumbnail\n  } = loadArticle;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Snackbar, {\n    anchorOrigin: {\n      vertical,\n      horizontal\n    },\n    open: state.open,\n    autoHideDuration: 6000,\n    onClose: () => setState(state => ({ ...state,\n      open: false\n    })),\n    key: vertical + horizontal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Alert, {\n    onClose: () => setState(state => ({ ...state,\n      open: false\n    })),\n    severity: severity,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, title)), /*#__PURE__*/React.createElement(Modal, {\n    \"aria-labelledby\": \"transition-modal-title\",\n    \"aria-describedby\": \"transition-modal-description\",\n    className: classes.modal,\n    open: open,\n    onClose: handleClose,\n    closeAfterTransition: true,\n    BackdropComponent: Backdrop,\n    BackdropProps: {\n      timeout: 500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Fade, {\n    in: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    subheader: \"Edit your Article\",\n    title: \"Article\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    id: \"myform\",\n    encType: \"multipart/form-data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.details,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: classes.avatar,\n    src: values.picture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      position: \"absolute\",\n      marginTop: \"40px\",\n      cursor: \"pointer\"\n    },\n    type: \"file\",\n    onChange: onImageChange,\n    name: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: addImage,\n    className: classes.uploadButton,\n    disabled: editThumbnail,\n    color: \"primary\",\n    variant: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 17\n    }\n  }, editThumbnail ? \"Loading...\" : \"Edit Thumbnail\"))), /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    label: \"Title\",\n    name: \"title\",\n    onChange: handleChange,\n    type: \"text\",\n    value: values.title,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CreatableSelect, {\n    isMulti: true,\n    onChange: handleTags,\n    components: animatedComponents,\n    styles: customStyles,\n    placeholder: \"Add more tags...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(CKEditor, {\n    editor: ClassicEditor,\n    onChange: (event, editor) => {\n      const data = editor.getData();\n      setValues(values => ({ ...values,\n        description: data\n      }));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CardActions, {\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    variant: \"outlined\",\n    onClick: editArticle,\n    disabled: loadingArticle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 15\n    }\n  }, loadingArticle ? \"Loading ...\" : \"Edit Article\"))))));\n}","map":{"version":3,"sources":["/home/mronoyy/Documents/project/react-dashboard/src/views/Article/components/Edit.js"],"names":["React","useState","makeStyles","Card","CardHeader","CardContent","CardActions","Divider","Button","TextField","Avatar","apiDashManage","Snackbar","MuiAlert","CKEditor","ClassicEditor","CreatableSelect","makeAnimated","axios","Modal","Backdrop","Fade","Alert","props","useStyles","theme","modal","display","alignItems","justifyContent","paper","backgroundColor","palette","background","border","boxShadow","shadows","padding","spacing","details","avatar","marginLeft","height","width","flexShrink","flexGrow","uploadButton","marginRight","customStyles","container","marginBottom","marginTop","menu","animatedComponents","Edit","open","handleClose","classes","loadArticle","setLoadArtile","loadingArticle","editThumbnail","values","setValues","title","tags","description","image","imgrequest","picture","figurethumbnails","state","setState","severity","vertical","horizontal","handleChange","event","target","name","value","handleTags","newValue","onImageChange","e","preventDefault","reader","FileReader","file","files","onloadend","result","readAsDataURL","addImage","formdata","FormData","append","method","url","headers","Authorization","localStorage","getItem","data","then","res","thumbnail","catch","err","editArticle","formData","i","length","arr","timeout","position","cursor","editor","getData"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport {\n  Card,\n  CardHeader,\n  CardContent,\n  CardActions,\n  Divider,\n  Button,\n  TextField,\n  Avatar,\n} from \"@material-ui/core\";\nimport { apiDashManage } from \"../../../api/api\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport MuiAlert from \"@material-ui/lab/Alert\";\nimport CKEditor from \"@ckeditor/ckeditor5-react\";\nimport ClassicEditor from \"@ckeditor/ckeditor5-build-classic\";\nimport CreatableSelect from \"react-select/creatable\";\nimport makeAnimated from \"react-select/animated\";\nimport axios from \"axios\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\n}\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: \"2px solid #000\",\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n\n  details: {\n    display: \"flex\",\n  },\n  avatar: {\n    marginLeft: \"auto\",\n    height: 110,\n    width: 100,\n    flexShrink: 0,\n    flexGrow: 0,\n  },\n\n  uploadButton: {\n    marginRight: theme.spacing(2),\n  },\n}));\n\nconst customStyles = {\n  container: () => ({\n    marginBottom: \"1rem\",\n    marginTop: \"1rem\",\n  }),\n  menu: () => ({\n    width: \"100%\",\n  }),\n};\n\nconst animatedComponents = makeAnimated();\n\nexport default function Edit({ open, handleClose }) {\n  const classes = useStyles();\n  const [loadArticle, setLoadArtile] = useState({\n    loadingArticle: false,\n    editThumbnail: false,\n  });\n  const [values, setValues] = useState({\n    title: \"\",\n    tags: [],\n    description: \"\",\n    image: null,\n    imgrequest: null,\n    picture: \"https://placehold.it/500x600\",\n    figurethumbnails: \"\",\n  });\n\n  const [state, setState] = React.useState({\n    open: false,\n    title: \"\",\n    severity: \"\",\n    vertical: \"top\",\n    horizontal: \"right\",\n  });\n\n  const handleChange = (event) => {\n    setValues({\n      ...values,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleTags = (newValue) => {\n    setValues((values) => ({\n      ...values,\n      tags: newValue,\n    }));\n  };\n\n  const onImageChange = (e) => {\n    e.preventDefault();\n    let reader = new FileReader();\n    let file = e.target.files[0];\n\n    reader.onloadend = () => {\n      setValues((values) => ({\n        ...values,\n        image: file,\n        picture: reader.result,\n        figurethumbnails: file.name,\n      }));\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const addImage = () => {\n    setLoadArtile((loadingArticle) => ({\n      ...loadingArticle,\n      editThumbnail: true,\n    }));\n    const formdata = new FormData();\n    formdata.append(\"image\", values.image);\n\n    axios({\n      method: \"post\",\n      url: `${apiDashManage}image`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: formdata,\n    })\n      .then((res) => {\n        setLoadArtile((loadingArticle) => ({\n          ...loadingArticle,\n          editThumbnail: false,\n        }));\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Good job success !\",\n          severity: \"success\",\n        }));\n        setValues((values) => ({\n          ...values,\n          imgrequest: res.data.thumbnail,\n        }));\n      })\n      .catch((err) => {\n        setLoadArtile((loadingArticle) => ({\n          ...loadingArticle,\n          editThumbnail: false,\n        }));\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Check your connection !\",\n          severity: \"error\",\n        }));\n      });\n  };\n\n  const editArticle = (e) => {\n    e.preventDefault();\n    setLoadArtile((loadArticle) => ({\n      ...loadArticle,\n      loadingArticle: true,\n    }));\n\n    // const dataArticle = {\n    //   title: values.title,\n    //   tags: values.tags,\n    //   thumbnail: values.imgrequest,\n    //   description: values.description,\n    // };\n\n    let formData = new FormData();\n\n    formData.append(\"title\", values.title);\n    for (let i = 0; i > values.tags.length; i++) {\n      const arr = values.tags[i];\n      formData.append(\"tags\", arr);\n    }\n    formData.append(\"thumbnail\", values.imgrequest);\n    formData.append(\"description\", values.description);\n\n    axios({\n      method: \"put\",\n      url: `${apiDashManage}article`,\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n      },\n      data: formData,\n    })\n      .then((res) => {\n        setLoadArtile((loadArticle) => ({\n          ...loadArticle,\n          loadingArticle: false,\n        }));\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Article has been edited !\",\n          severity: \"success\",\n        }));\n        setValues((values) => ({\n          ...values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: \"\",\n          picture: \"\",\n          imgrequest: null,\n          figurethumbnails: \"\",\n        }));\n      })\n      .catch((err) => {\n        setLoadArtile((loadArticle) => ({\n          ...loadArticle,\n          loadingArticle: false,\n        }));\n        setState((state) => ({\n          ...state,\n          open: true,\n          title: \"Check your connection !\",\n          severity: \"error\",\n        }));\n        setValues((values) => ({\n          ...values,\n          title: \"\",\n          tags: [],\n          description: \"\",\n          image: \"\",\n          picture: \"\",\n          imgrequest: null,\n          figurethumbnails: \"\",\n        }));\n      });\n  };\n\n  const { severity, title, vertical, horizontal } = state;\n  const { loadingArticle, editThumbnail } = loadArticle;\n\n  return (\n    <>\n      <Snackbar\n        anchorOrigin={{ vertical, horizontal }}\n        open={state.open}\n        autoHideDuration={6000}\n        onClose={() =>\n          setState((state) => ({\n            ...state,\n            open: false,\n          }))\n        }\n        key={vertical + horizontal}\n      >\n        <Alert\n          onClose={() =>\n            setState((state) => ({\n              ...state,\n              open: false,\n            }))\n          }\n          severity={severity}\n        >\n          {title}\n        </Alert>\n      </Snackbar>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        onClose={handleClose}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n          <Card>\n            <CardHeader subheader=\"Edit your Article\" title=\"Article\" />\n            <Divider />\n            <form id=\"myform\" encType=\"multipart/form-data\">\n              <CardContent>\n                <div className={classes.details}>\n                  <Avatar className={classes.avatar} src={values.picture} />\n                  <input\n                    style={{\n                      position: \"absolute\",\n                      marginTop: \"40px\",\n                      cursor: \"pointer\",\n                    }}\n                    type=\"file\"\n                    onChange={onImageChange}\n                    name=\"image\"\n                  />\n                </div>\n              </CardContent>\n              <Divider />\n              <CardActions>\n                <Button\n                  onClick={addImage}\n                  className={classes.uploadButton}\n                  disabled={editThumbnail}\n                  color=\"primary\"\n                  variant=\"text\"\n                >\n                  {editThumbnail ? \"Loading...\" : \"Edit Thumbnail\"}\n                </Button>\n              </CardActions>\n            </form>\n\n            <CardContent>\n              <TextField\n                fullWidth\n                label=\"Title\"\n                name=\"title\"\n                onChange={handleChange}\n                type=\"text\"\n                value={values.title}\n                variant=\"outlined\"\n              />\n\n              <CreatableSelect\n                isMulti\n                onChange={handleTags}\n                components={animatedComponents}\n                styles={customStyles}\n                placeholder=\"Add more tags...\"\n              />\n              <CKEditor\n                editor={ClassicEditor}\n                onChange={(event, editor) => {\n                  const data = editor.getData();\n                  setValues((values) => ({\n                    ...values,\n                    description: data,\n                  }));\n                }}\n              />\n            </CardContent>\n            <Divider />\n            <CardActions style={{ justifyContent: \"center\" }}>\n              <Button\n                color=\"primary\"\n                variant=\"outlined\"\n                onClick={editArticle}\n                disabled={loadingArticle}\n              >\n                {loadingArticle ? \"Loading ...\" : \"Edit Article\"}\n              </Button>\n            </CardActions>\n          </Card>\n        </Fade>\n      </Modal>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}